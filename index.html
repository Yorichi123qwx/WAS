<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุณุฌูู ุงูุญุถูุฑ</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- QR Code Scanner -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
    
    <!-- Face API -->
    <script src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.12/dist/face-api.min.js"></script>
    
    <link rel="stylesheet" href="attendance-style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>๐ ูุธุงู ุงูุญุถูุฑ ูุงูุบูุงุจ</h1>
            <p>ุชุณุฌูู ุญุถูุฑ ุงูุทูุงุจ</p>
            <div class="time-display" id="currentTime"></div>
        </div>

        <!-- Attendance Closed Screen -->
        <div id="attendanceClosedScreen" class="attendance-closed hidden">
            <div class="closed-icon">๐</div>
            <div class="closed-title">ุนุฐุฑุงูุ ุชุณุฌูู ุงูุญุถูุฑ ูุบูู ุญุงููุงู</div>
            <div class="closed-message" id="closedMessage">
                ูุฑุฌู ุงูุชุณุฌูู ูู ุงููุนุงุฏ ุงููุญุฏุฏ
            </div>
            <div class="schedule-info" id="scheduleInfo">
                <div class="schedule-label">ูุนุงุฏ ุชุณุฌูู ุงูุญุถูุฑ:</div>
                <div class="schedule-time" id="scheduleTime"></div>
            </div>
            <button class="btn btn-back" onclick="window.location.href='index.html'">
                ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
            </button>
        </div>

        <!-- Main Content -->
        <div class="content" id="mainContent">
            <!-- Method Selector -->
            <div id="methodSelector">
                <h3 class="scan-title">ุงุฎุชุฑ ุทุฑููุฉ ุงูุชุณุฌูู:</h3>
                <div class="method-selector">
                    <div class="method-btn active" onclick="selectMethod('face')">
                        <div class="method-icon">๐</div>
                        <div class="method-label">ุงูุชุนุฑู ุนูู ุงููุฌู</div>
                    </div>
                    <div class="method-btn" onclick="selectMethod('qr')">
                        <div class="method-icon">๐ฑ</div>
                        <div class="method-label">QR Code</div>
                    </div>
                    <div class="method-btn" onclick="selectMethod('id')">
                        <div class="method-icon">๐</div>
                        <div class="method-label">ููุฏ ุงูุทุงูุจ</div>
                    </div>
                </div>
            </div>

            <!-- Face Recognition Section -->
            <div class="scan-section active" id="faceSection">
                <h2 class="scan-title">ุงูุธุฑ ุฅูู ุงููุงููุฑุง ูุชุณุฌูู ุญุถูุฑู</h2>
                <div class="instructions">
                    ุชุฃูุฏ ูู ูุฌูุฏ ุฅุถุงุกุฉ ุฌูุฏุฉ ูุงูุธุฑ ูุจุงุดุฑุฉ ุฅูู ุงููุงููุฑุง
                </div>
                <div class="scan-box">
                    <div class="camera-container">
                        <video id="video-element" autoplay playsinline></video>
                    </div>
                    <div id="scanningStatus" class="scanning-status hidden"></div>
                </div>
                <button class="btn" id="startFaceBtn">ุงุจุฏุฃ ุงูุชุนุฑู ุนูู ุงููุฌู</button>
            </div>

            <!-- QR Code Section -->
            <div class="scan-section" id="qrSection">
                <h2 class="scan-title">ุงูุณุญ QR Code ูู ุงููุงุฑุช</h2>
                <div class="instructions">
                    ูุฑุจ ุงููุงููุฑุง ูู ุงููุงุฑุช ููุณุญ ุงูููุฏ
                </div>
                <div class="scan-box">
                    <div id="qr-reader"></div>
                </div>
                <button class="btn" id="startQrBtn">ุงุจุฏุฃ ุงููุณุญ</button>
            </div>

            <!-- ID Input Section -->
            <div class="scan-section" id="idSection">
                <h2 class="scan-title">ุฃุฏุฎู ููุฏู ุนูู ุงููุงุฑุช</h2>
                <div class="instructions">
                    ุฃุฏุฎู ููุฏู ุงูุตุญูุญ ุนูู ุงููุงุฑุช
                </div>
                <div class="scan-box">
                    <div class="form-group">
                        <label class="form-label">ููุฏ ุงูุทุงูุจ</label>
                        <input type="text" class="form-input" id="studentIdInput" placeholder="ูุซุงู: ABC123">
                    </div>
                </div>
                <button class="btn" id="submitIdBtn">ุชุณุฌูู ุงูุญุถูุฑ</button>
            </div>

            <!-- Success Section -->
            <div class="scan-section" id="successSection">
                <div class="success-message">
                    <div class="success-icon">โ</div>
                    <h2 class="scan-title">ุชู ุชุณุฌูู ุญุถูุฑู ุจูุฌุงุญ!</h2>
                    <div id="successDetails"></div>
                </div>
                <button class="btn" id="newAttendanceBtn">ุชุณุฌูู ุทุงูุจ ุขุฎุฑ</button>
            </div>

            <!-- Loading Section -->
            <div id="loadingSection" class="loading hidden">
                <div class="spinner"></div>
                <span id="loadingText">ุฌุงุฑู ุงูุชุญูู...</span>
            </div>

            <!-- Error Section -->
            <div id="errorMessage" class="error-message hidden"></div>
        </div>
    </div>

    <script src="attendance-script.js"></script>
</body>
</html>
